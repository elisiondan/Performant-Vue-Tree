<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Node evaluators | Perfomant Vue Tree</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/Performant-Vue-Tree/assets/css/0.styles.294436fb.css" as="style"><link rel="preload" href="/Performant-Vue-Tree/assets/js/app.134337c3.js" as="script"><link rel="preload" href="/Performant-Vue-Tree/assets/js/2.69bd3d75.js" as="script"><link rel="preload" href="/Performant-Vue-Tree/assets/js/8.ff5f0731.js" as="script"><link rel="prefetch" href="/Performant-Vue-Tree/assets/js/10.d831a0bd.js"><link rel="prefetch" href="/Performant-Vue-Tree/assets/js/11.58d1c164.js"><link rel="prefetch" href="/Performant-Vue-Tree/assets/js/12.ec9af641.js"><link rel="prefetch" href="/Performant-Vue-Tree/assets/js/13.eade9bff.js"><link rel="prefetch" href="/Performant-Vue-Tree/assets/js/14.41f0c255.js"><link rel="prefetch" href="/Performant-Vue-Tree/assets/js/15.547f3e22.js"><link rel="prefetch" href="/Performant-Vue-Tree/assets/js/16.f74506a5.js"><link rel="prefetch" href="/Performant-Vue-Tree/assets/js/17.07399ba5.js"><link rel="prefetch" href="/Performant-Vue-Tree/assets/js/3.3017040b.js"><link rel="prefetch" href="/Performant-Vue-Tree/assets/js/4.9176e803.js"><link rel="prefetch" href="/Performant-Vue-Tree/assets/js/5.884ec324.js"><link rel="prefetch" href="/Performant-Vue-Tree/assets/js/6.9dd2d831.js"><link rel="prefetch" href="/Performant-Vue-Tree/assets/js/7.56872e05.js"><link rel="prefetch" href="/Performant-Vue-Tree/assets/js/9.437db44a.js">
    <link rel="stylesheet" href="/Performant-Vue-Tree/assets/css/0.styles.294436fb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Performant-Vue-Tree/" class="home-link router-link-active"><!----> <span class="site-name">Perfomant Vue Tree</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/Performant-Vue-Tree/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/Performant-Vue-Tree/installation.html" class="sidebar-link">Installation</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Performant-Vue-Tree/guide/basic-usage.html" class="sidebar-link">Usage</a></li><li><a href="/Performant-Vue-Tree/guide/options.html" class="sidebar-link">Options</a></li><li><a href="/Performant-Vue-Tree/guide/slots.html" class="sidebar-link">Slots</a></li><li><a href="/Performant-Vue-Tree/guide/events.html" class="sidebar-link">Events</a></li><li><a href="/Performant-Vue-Tree/guide/custom-node-properties.html" class="sidebar-link">Custom node properties</a></li><li><a href="/Performant-Vue-Tree/guide/internal-node-properties.html" class="sidebar-link">Internal node properties</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Advanced</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Performant-Vue-Tree/advanced/node-evaluators.html" aria-current="page" class="active sidebar-link">Node evaluators</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Performant-Vue-Tree/advanced/node-evaluators.html#creating-a-node-evaluator" class="sidebar-link">Creating a node evaluator</a></li><li class="sidebar-sub-header"><a href="/Performant-Vue-Tree/advanced/node-evaluators.html#registering-node-evaluator" class="sidebar-link">Registering node evaluator</a></li></ul></li><li><a href="/Performant-Vue-Tree/advanced/tree-traversal.html" class="sidebar-link">Tree traversal</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="node-evaluators"><a href="#node-evaluators" class="header-anchor">#</a> Node evaluators</h1> <p>Every interaction that requires to traverse through the whole tree is quite resource expensive. Therefore, the <em>Performant Vue tree</em> uses service workers in the background to do the heavy lifting, thus assures that the UI thread is not blocked.</p> <p>Whenever you need perform an action that requires the full tree traversal while maintaining the state (open/closed, highlights) etc. or do not wish to use service workers from scratch by yourself, you may use <code>node evaluators</code>.</p> <h2 id="creating-a-node-evaluator"><a href="#creating-a-node-evaluator" class="header-anchor">#</a> Creating a node evaluator</h2> <p>An evaluator should be an object that contains a method with the following signature:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> IProcessedTreeNode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-performant-tree/src/models/tree-node'</span><span class="token punctuation">;</span> <span class="token comment">// TBD</span>

<span class="token function">handleNode</span><span class="token punctuation">(</span>node<span class="token operator">:</span> IProcessedTreeNode<span class="token punctuation">,</span> payload<span class="token operator">:</span> any<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
</code></pre></div><p>In short, the <code>handleNode</code> method receives the given node and any kind of payload that is sent by the <a href="/advanced/tree-traversal">treeObserver</a>. Beware that the payload may contain data targeted for at other evaluators, so it is <strong>responsibility of each evaluator to check whether the data are for them</strong>.</p> <p>An exemplary implementation of an evaluator that expands each node with children could look like this.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// expand-all-evaluator.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> INodeEvaluator <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'performant-vue-tree/dist/models/node-evaluator'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> IProcessedTreeNode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'performant-vue-tree/dist/models/tree-node'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">IExpandAllOptions</span> <span class="token punctuation">{</span>
    expandAll<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> expandAllEvaluator<span class="token operator">:</span> INodeEvaluator <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">handleNode</span><span class="token punctuation">(</span>node<span class="token operator">:</span> IProcessedTreeNode<span class="token punctuation">,</span> payload<span class="token operator">:</span> IExpandAllOptions<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>payload<span class="token punctuation">.</span>expandAll<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      node<span class="token punctuation">.</span>__state <span class="token operator">=</span> <span class="token string">'open'</span><span class="token punctuation">;</span>
      node<span class="token punctuation">.</span>__visible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> expandAllEvaluator<span class="token punctuation">;</span>

</code></pre></div><p>Do note the we check whether the <code>expandAll</code> on <em>payload</em> argument is <strong>true</strong> (it would have been false if undefined). When it is, setting the type of payload enabled suggestions and type checking later in the code. Naturally, this is not precise, because we do not know upfront it's truly the given type. Ideally, it should be set to unknown and only then resolved whether it's the required type or not. The scale of type checking is up to you.</p> <p>The <code>__state</code> attribute is an artificially added attribute for internal purposes. However, you may reassign it manually if you need to override the state programmatically. See <a href="/guide/internal-node-attributes">additional node attributes</a> for details.</p> <p><strong>Note about ES6 classes</strong>
Beware that you cannot use classes that would implement the <code>handleNode</code> method. The methods in classes exist only on their prototype and as such cannot be serialized and passed to the service workers. See this <a href="https://localazy.com/blog/how-to-pass-function-to-web-workers" target="_blank" rel="noopener noreferrer">blog post<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for a more details.</p> <h2 id="registering-node-evaluator"><a href="#registering-node-evaluator" class="header-anchor">#</a> Registering node evaluator</h2> <p>Once created, you need to add node evaluators to the tree <a href="/guide/options">options</a>.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> ExpandAllEvaluator <span class="token keyword">from</span> <span class="token string">'./expand-all-evaluator'</span><span class="token punctuation">;</span>

computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">options</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            nodeEvaluators<span class="token operator">:</span> <span class="token punctuation">[</span>ExpandAllEvaluator<span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>You may add as many evaluators as you want, but beware that they are executed in order.
Once the <a href="/advanced/tree-observer">tree traversal</a> is triggered, each node (starting from root) is visited and evaluated in each evaluator.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Performant-Vue-Tree/guide/internal-node-properties.html" class="prev">
        Internal node properties
      </a></span> <span class="next"><a href="/Performant-Vue-Tree/advanced/tree-traversal.html">
        Tree traversal
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Performant-Vue-Tree/assets/js/app.134337c3.js" defer></script><script src="/Performant-Vue-Tree/assets/js/2.69bd3d75.js" defer></script><script src="/Performant-Vue-Tree/assets/js/8.ff5f0731.js" defer></script>
  </body>
</html>
